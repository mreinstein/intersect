{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/examples.ts","webpack:///./src/intersect.ts"],"names":[],"mappings":"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","file":"bundle.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"./src/examples.ts\");\n","\"use strict\";\n\nimport { AABB, Point } from \"./intersect\";\n\nfunction reflect(velocity: Point, normal: Point, out: Point) {\n  const dot = velocity.x * normal.x + velocity.y * normal.y;\n  const ux = normal.x * dot;\n  const uy = normal.y * dot;\n  const wx = velocity.x - ux;\n  const wy = velocity.y - uy;\n  out.x = wx - ux;\n  out.y = wy - uy;\n}\n\nclass Example {\n  public context: CanvasRenderingContext2D;\n  public width: number;\n  public height: number;\n  public origin: Point;\n  public infiniteLength: number;\n\n  constructor(\n    context: CanvasRenderingContext2D,\n    width: number,\n    height: number\n  ) {\n    this.context = context;\n    this.width = width;\n    this.height = height;\n    this.origin = new Point(this.width * 0.5, this.height * 0.5);\n    this.infiniteLength = Math.sqrt(\n      this.width * this.width + this.height * this.height\n    );\n  }\n\n  public drawAABB(box: AABB, color: string = \"#fff\", thickness: number = 1) {\n    const x1 = Math.floor(this.origin.x + box.pos.x - box.half.x);\n    const y1 = Math.floor(this.origin.y + box.pos.y - box.half.y);\n    const x2 = Math.floor(this.origin.x + box.pos.x + box.half.x);\n    const y2 = Math.floor(this.origin.y + box.pos.y + box.half.y);\n    this.context.beginPath();\n    this.context.moveTo(x1, y1);\n    this.context.lineTo(x2, y1);\n    this.context.lineTo(x2, y2);\n    this.context.lineTo(x1, y2);\n    this.context.lineTo(x1, y1);\n    this.context.closePath();\n    this.context.lineWidth = thickness;\n    this.context.strokeStyle = color;\n    this.context.stroke();\n  }\n\n  public drawCircle(\n    circle: { pos: Point; radius: number },\n    color: string = \"#fff\",\n    thickness: number = 1\n  ) {\n    const x = Math.floor(this.origin.x + circle.pos.x);\n    const y = Math.floor(this.origin.y + circle.pos.y);\n    this.context.beginPath();\n    this.context.arc(x, y, circle.radius, 0, 2 * Math.PI, true);\n    this.context.closePath();\n    this.context.lineWidth = thickness;\n    this.context.strokeStyle = color;\n    this.context.stroke();\n  }\n\n  public drawPoint(\n    point: Point,\n    color: string = \"#fff\",\n    text: string = \"\",\n    thickness: number = 1\n  ) {\n    const x = Math.floor(this.origin.x + point.x - thickness / 2);\n    const y = Math.floor(this.origin.y + point.y - thickness / 2);\n    this.context.lineWidth = thickness;\n    this.context.fillStyle = color;\n    this.context.strokeStyle = color;\n    this.context.fillRect(x, y, thickness, thickness);\n    this.context.strokeRect(x, y, thickness, thickness);\n    if (text) {\n      this.context.fillText(text, x + thickness * 4, y + thickness * 2);\n    }\n  }\n\n  public drawRay(\n    pos: Point,\n    dir: Point,\n    length: number,\n    color: string = \"#fff\",\n    arrow: boolean = true,\n    thickness: number = 1\n  ) {\n    const pos2 = new Point(pos.x + dir.x * length, pos.y + dir.y * length);\n    this.drawSegment(pos, pos2, color, thickness);\n    if (arrow) {\n      pos = pos2.clone();\n      pos2.x = pos.x - dir.x * 4 + dir.y * 4;\n      pos2.y = pos.y - dir.y * 4 - dir.x * 4;\n      this.drawSegment(pos, pos2, color, thickness);\n      pos2.x = pos.x - dir.x * 4 - dir.y * 4;\n      pos2.y = pos.y - dir.y * 4 + dir.x * 4;\n      this.drawSegment(pos, pos2, color, thickness);\n    }\n  }\n\n  public drawSegment(\n    point1: Point,\n    point2: Point,\n    color: string = \"#fff\",\n    thickness: number = 1\n  ) {\n    const x1 = Math.floor(this.origin.x + point1.x);\n    const y1 = Math.floor(this.origin.y + point1.y);\n    const x2 = Math.floor(this.origin.x + point2.x);\n    const y2 = Math.floor(this.origin.y + point2.y);\n    this.context.beginPath();\n    this.context.moveTo(x1, y1);\n    this.context.lineTo(x2, y2);\n    this.context.closePath();\n    this.context.lineWidth = thickness;\n    this.context.strokeStyle = color;\n    this.context.stroke();\n  }\n\n  public tick(elapsed: number) {\n    this.context.fillStyle = \"#000\";\n    this.context.fillRect(0, 0, this.width, this.height);\n  }\n}\n\nclass AABBPointExample extends Example {\n  public angle: number;\n  public pos: Point;\n  public box: AABB;\n\n  constructor(\n    context: CanvasRenderingContext2D,\n    width: number,\n    height: number\n  ) {\n    super(context, width, height);\n    this.angle = 0;\n    this.pos = new Point();\n    this.box = new AABB(new Point(0, 0), new Point(16, 16));\n  }\n\n  public tick(elapsed: number) {\n    super.tick(elapsed);\n    this.angle += 0.5 * Math.PI * elapsed;\n    this.pos.x = Math.cos(this.angle * 0.4) * 32;\n    this.pos.y = Math.sin(this.angle) * 12;\n    const hit = this.box.intersectPoint(this.pos);\n    this.drawAABB(this.box, \"#666\");\n    if (hit) {\n      this.drawPoint(this.pos, \"#f00\");\n      this.drawPoint(hit.pos, \"#ff0\");\n    } else {\n      this.drawPoint(this.pos, \"#0f0\");\n    }\n  }\n}\n\nclass AABBSegmentExample extends Example {\n  public angle: number;\n  public box: AABB;\n\n  constructor(\n    context: CanvasRenderingContext2D,\n    width: number,\n    height: number\n  ) {\n    super(context, width, height);\n    this.angle = 0;\n    this.box = new AABB(new Point(0, 0), new Point(16, 16));\n  }\n\n  public tick(elapsed: number) {\n    super.tick(elapsed);\n    this.angle += 0.5 * Math.PI * elapsed;\n    const pos1 = new Point(\n      Math.cos(this.angle) * 64,\n      Math.sin(this.angle) * 64\n    );\n    const pos2 = new Point(\n      Math.sin(this.angle) * 32,\n      Math.cos(this.angle) * 32\n    );\n    const delta = new Point(pos2.x - pos1.x, pos2.y - pos1.y);\n    const hit = this.box.intersectSegment(pos1, delta);\n    const dir = delta.clone();\n    const length = dir.normalize();\n    this.drawAABB(this.box, \"#666\");\n    if (hit) {\n      this.drawRay(pos1, dir, length, \"#f00\");\n      this.drawSegment(pos1, hit.pos, \"#ff0\");\n      this.drawPoint(hit.pos, \"#ff0\");\n      this.drawRay(hit.pos, hit.normal, 6, \"#ff0\", false);\n    } else {\n      this.drawRay(pos1, dir, length, \"#0f0\");\n    }\n  }\n}\n\nclass AABBAABBExample extends Example {\n  public angle: number;\n  public box1: AABB;\n  public box2: AABB;\n\n  constructor(\n    context: CanvasRenderingContext2D,\n    width: number,\n    height: number\n  ) {\n    super(context, width, height);\n    this.angle = 0;\n    this.box1 = new AABB(new Point(0, 0), new Point(64, 16));\n    this.box2 = new AABB(new Point(0, 0), new Point(16, 16));\n  }\n\n  public tick(elapsed: number) {\n    super.tick(elapsed);\n    this.angle += 0.2 * Math.PI * elapsed;\n    this.box2.pos.x = Math.cos(this.angle) * 96;\n    this.box2.pos.y = Math.sin(this.angle * 2.4) * 24;\n    const hit = this.box1.intersectAABB(this.box2);\n    this.drawAABB(this.box1, \"#666\");\n    if (hit) {\n      this.drawAABB(this.box2, \"#f00\");\n      this.box2.pos.x += hit.delta.x;\n      this.box2.pos.y += hit.delta.y;\n      this.drawAABB(this.box2, \"#ff0\");\n      this.drawPoint(hit.pos, \"#ff0\");\n      this.drawRay(hit.pos, hit.normal, 4, \"#ff0\", false);\n    } else {\n      this.drawAABB(this.box2, \"#0f0\");\n    }\n  }\n}\n\nclass AABBSweptAABBExample extends Example {\n  public angle: number;\n  public staticBox: AABB;\n  public sweepBoxes: AABB[];\n  public sweepDeltas: Point[];\n  public tempBox: AABB;\n\n  constructor(\n    context: CanvasRenderingContext2D,\n    width: number,\n    height: number\n  ) {\n    super(context, width, height);\n    this.angle = 0;\n    this.staticBox = new AABB(new Point(0, 0), new Point(112, 16));\n    this.sweepBoxes = [\n      new AABB(new Point(-152, 24), new Point(16, 16)),\n      new AABB(new Point(128, -48), new Point(16, 16))\n    ];\n    this.sweepDeltas = [new Point(64, -12), new Point(-32, 96)];\n    this.tempBox = new AABB(new Point(0, 0), new Point(16, 16));\n  }\n\n  public tick(elapsed: number) {\n    super.tick(elapsed);\n    this.angle += 0.5 * Math.PI * elapsed;\n    this.drawAABB(this.staticBox, \"#666\");\n    const factor = (Math.cos(this.angle) + 1) * 0.5 || 1e-8;\n    this.sweepBoxes.forEach((box, i) => {\n      const delta = this.sweepDeltas[i].clone();\n      delta.x *= factor;\n      delta.y *= factor;\n      const sweep = this.staticBox.sweepAABB(box, delta);\n      const dir = delta.clone();\n      const length = dir.normalize();\n      this.drawAABB(box, \"#666\");\n      if (sweep.hit) {\n        // Draw a red box at the point where it was trying to move to\n        this.drawRay(box.pos, dir, length, \"#f00\");\n        this.tempBox.pos.x = box.pos.x + delta.x;\n        this.tempBox.pos.y = box.pos.y + delta.y;\n        this.drawAABB(this.tempBox, \"#f00\");\n        // Draw a yellow box at the point it actually got to\n        this.tempBox.pos.x = sweep.pos.x;\n        this.tempBox.pos.y = sweep.pos.y;\n        this.drawAABB(this.tempBox, \"#ff0\");\n        this.drawPoint(sweep.hit.pos, \"#ff0\");\n        this.drawRay(sweep.hit.pos, sweep.hit.normal, 4, \"#ff0\", false);\n      } else {\n        this.tempBox.pos.x = sweep.pos.x;\n        this.tempBox.pos.y = sweep.pos.y;\n        this.drawAABB(this.tempBox, \"#0f0\");\n        this.drawRay(box.pos, dir, length, \"#0f0\");\n      }\n    });\n  }\n}\n\nclass MultipleAABBSweptAABBExample extends Example {\n  public delta: Point;\n  public velocity: Point;\n  public movingBox: AABB;\n  public staticBoxes: AABB[];\n\n  constructor(\n    context: CanvasRenderingContext2D,\n    width: number,\n    height: number\n  ) {\n    super(context, width, height);\n    this.delta = new Point();\n    this.velocity = new Point(48, 48);\n    this.movingBox = new AABB(new Point(0, 0), new Point(8, 8));\n    this.staticBoxes = [\n      new AABB(new Point(-96, 0), new Point(8, 48)),\n      new AABB(new Point(96, 0), new Point(8, 48)),\n      new AABB(new Point(0, -56), new Point(104, 8)),\n      new AABB(new Point(0, 56), new Point(104, 8))\n    ];\n  }\n\n  public tick(elapsed: number) {\n    super.tick(elapsed);\n    this.delta.x = this.velocity.x * elapsed;\n    this.delta.y = this.velocity.y * elapsed;\n    const sweep = this.movingBox.sweepInto(this.staticBoxes, this.delta);\n    if (sweep.hit) {\n      // This should really attempt to slide along the hit normal, and use up\n      // the rest of the velocity, but that\"s a bit much for this example\n      reflect(this.velocity, sweep.hit.normal, this.velocity);\n    }\n    this.staticBoxes.forEach(staticBox => {\n      if (sweep.hit && sweep.hit.collider === staticBox) {\n        this.drawAABB(staticBox, \"#aaa\");\n      } else {\n        this.drawAABB(staticBox, \"#666\");\n      }\n    });\n    this.movingBox.pos = sweep.pos;\n    this.drawAABB(this.movingBox, sweep.hit ? \"#ff0\" : \"#0f0\");\n  }\n}\n\nfunction ready(callback: () => void) {\n  if (document.readyState === \"complete\") {\n    setTimeout(callback, 1);\n    return;\n  }\n  document.addEventListener(\n    \"DOMContentLoaded\",\n    function handler() {\n      document.removeEventListener(\"DOMContentLoaded\", handler, false);\n      callback();\n    },\n    false\n  );\n}\n\nready(() => {\n  const exampleIds: { [key: string]: any } = {\n    \"aabb-vs-aabb\": AABBAABBExample,\n    \"aabb-vs-point\": AABBPointExample,\n    \"aabb-vs-segment\": AABBSegmentExample,\n    \"aabb-vs-swept-aabb\": AABBSweptAABBExample,\n    \"sweeping-an-aabb-through-multiple-objects\": MultipleAABBSweptAABBExample\n  };\n\n  const examples: Example[] = [];\n  Object.keys(exampleIds).forEach(id => {\n    const exampleConstructor = exampleIds[id];\n    const anchor = document.getElementById(id);\n    if (!anchor || !anchor.parentNode) {\n      return;\n    }\n    const canvas = document.createElement(\"canvas\");\n    if (!canvas) {\n      return;\n    }\n    anchor.parentNode.insertBefore(canvas, anchor.nextSibling);\n    const width = (canvas.width = 640);\n    const height = (canvas.height = 160);\n    const context = canvas.getContext(\"2d\");\n    if (!context) {\n      return;\n    }\n    context.translate(0.5, 0.5);\n    const example = new exampleConstructor(context, width, height);\n    if (example) {\n      examples.push(example);\n    }\n  });\n\n  setInterval(() => {\n    examples.forEach(example => example.tick(1 / 30));\n  }, 1000 / 30);\n});\n","\"use strict\";\n\nexport const EPSILON: number = 1e-8;\n\nexport function abs(value: number): number {\n  return value < 0 ? -value : value;\n}\n\nexport function clamp(value: number, min: number, max: number): number {\n  if (value < min) {\n    return min;\n  } else if (value > max) {\n    return max;\n  } else {\n    return value;\n  }\n}\n\nexport function sign(value: number): number {\n  return value < 0 ? -1 : 1;\n}\n\nexport class Point {\n  public x: number;\n  public y: number;\n\n  constructor(x: number = 0, y: number = 0) {\n    this.x = x;\n    this.y = y;\n  }\n\n  public clone(): Point {\n    return new Point(this.x, this.y);\n  }\n\n  public normalize(): number {\n    let length = this.x * this.x + this.y * this.y;\n    if (length > 0) {\n      length = Math.sqrt(length);\n      const inverseLength = 1.0 / length;\n      this.x *= inverseLength;\n      this.y *= inverseLength;\n    } else {\n      this.x = 1;\n      this.y = 0;\n    }\n    return length;\n  }\n}\n\ntype Collider = AABB;\n\nexport class Hit {\n  public collider: Collider;\n  public pos: Point;\n  public delta: Point;\n  public normal: Point;\n  public time: number;\n\n  constructor(collider: Collider) {\n    this.collider = collider;\n    this.pos = new Point();\n    this.delta = new Point();\n    this.normal = new Point();\n    this.time = 0;\n  }\n}\n\nexport class Sweep {\n  public hit: Hit | null;\n  public pos: Point;\n  public time: number;\n\n  constructor() {\n    this.hit = null;\n    this.pos = new Point();\n    this.time = 1;\n  }\n}\n\nexport class AABB {\n  public pos: Point;\n  public half: Point;\n\n  constructor(pos: Point, half: Point) {\n    this.pos = pos;\n    this.half = half;\n  }\n\n  public intersectPoint(point: Point): Hit | null {\n    const dx = point.x - this.pos.x;\n    const px = this.half.x - abs(dx);\n    if (px <= 0) {\n      return null;\n    }\n\n    const dy = point.y - this.pos.y;\n    const py = this.half.y - abs(dy);\n    if (py <= 0) {\n      return null;\n    }\n\n    const hit = new Hit(this);\n    if (px < py) {\n      const sx = sign(dx);\n      hit.delta.x = px * sx;\n      hit.normal.x = sx;\n      hit.pos.x = this.pos.x + this.half.x * sx;\n      hit.pos.y = point.y;\n    } else {\n      const sy = sign(dy);\n      hit.delta.y = py * sy;\n      hit.normal.y = sy;\n      hit.pos.x = point.x;\n      hit.pos.y = this.pos.y + this.half.y * sy;\n    }\n    return hit;\n  }\n\n  public intersectSegment(\n    pos: Point,\n    delta: Point,\n    paddingX: number = 0,\n    paddingY: number = 0\n  ): Hit | null {\n    const scaleX = 1.0 / delta.x;\n    const scaleY = 1.0 / delta.y;\n    const signX = sign(scaleX);\n    const signY = sign(scaleY);\n    const nearTimeX =\n      (this.pos.x - signX * (this.half.x + paddingX) - pos.x) * scaleX;\n    const nearTimeY =\n      (this.pos.y - signY * (this.half.y + paddingY) - pos.y) * scaleY;\n    const farTimeX =\n      (this.pos.x + signX * (this.half.x + paddingX) - pos.x) * scaleX;\n    const farTimeY =\n      (this.pos.y + signY * (this.half.y + paddingY) - pos.y) * scaleY;\n    if (nearTimeX > farTimeY || nearTimeY > farTimeX) {\n      return null;\n    }\n\n    const nearTime = nearTimeX > nearTimeY ? nearTimeX : nearTimeY;\n    const farTime = farTimeX < farTimeY ? farTimeX : farTimeY;\n    if (nearTime >= 1 || farTime <= 0) {\n      return null;\n    }\n\n    const hit = new Hit(this);\n    hit.time = clamp(nearTime, 0, 1);\n    if (nearTimeX > nearTimeY) {\n      hit.normal.x = -signX;\n      hit.normal.y = 0;\n    } else {\n      hit.normal.x = 0;\n      hit.normal.y = -signY;\n    }\n    hit.delta.x = (1.0 - hit.time) * -delta.x;\n    hit.delta.y = (1.0 - hit.time) * -delta.y;\n    hit.pos.x = pos.x + delta.x * hit.time;\n    hit.pos.y = pos.y + delta.y * hit.time;\n    return hit;\n  }\n\n  public intersectAABB(box: AABB): Hit | null {\n    const dx = box.pos.x - this.pos.x;\n    const px = box.half.x + this.half.x - abs(dx);\n    if (px <= 0) {\n      return null;\n    }\n\n    const dy = box.pos.y - this.pos.y;\n    const py = box.half.y + this.half.y - abs(dy);\n    if (py <= 0) {\n      return null;\n    }\n\n    const hit = new Hit(this);\n    if (px < py) {\n      const sx = sign(dx);\n      hit.delta.x = px * sx;\n      hit.normal.x = sx;\n      hit.pos.x = this.pos.x + this.half.x * sx;\n      hit.pos.y = box.pos.y;\n    } else {\n      const sy = sign(dy);\n      hit.delta.y = py * sy;\n      hit.normal.y = sy;\n      hit.pos.x = box.pos.x;\n      hit.pos.y = this.pos.y + this.half.y * sy;\n    }\n    return hit;\n  }\n\n  public sweepAABB(box: AABB, delta: Point): Sweep {\n    const sweep = new Sweep();\n    if (delta.x === 0 && delta.y === 0) {\n      sweep.pos.x = box.pos.x;\n      sweep.pos.y = box.pos.y;\n      sweep.hit = this.intersectAABB(box);\n      sweep.time = sweep.hit ? (sweep.hit.time = 0) : 1;\n      return sweep;\n    }\n\n    sweep.hit = this.intersectSegment(box.pos, delta, box.half.x, box.half.y);\n    if (sweep.hit) {\n      sweep.time = clamp(sweep.hit.time - EPSILON, 0, 1);\n      sweep.pos.x = box.pos.x + delta.x * sweep.time;\n      sweep.pos.y = box.pos.y + delta.y * sweep.time;\n      const direction = delta.clone();\n      direction.normalize();\n      sweep.hit.pos.x = clamp(\n        sweep.hit.pos.x + direction.x * box.half.x,\n        this.pos.x - this.half.x,\n        this.pos.x + this.half.x\n      );\n      sweep.hit.pos.y = clamp(\n        sweep.hit.pos.y + direction.y * box.half.y,\n        this.pos.y - this.half.y,\n        this.pos.y + this.half.y\n      );\n    } else {\n      sweep.pos.x = box.pos.x + delta.x;\n      sweep.pos.y = box.pos.y + delta.y;\n      sweep.time = 1;\n    }\n    return sweep;\n  }\n\n  public sweepInto(staticColliders: Collider[], delta: Point): Sweep {\n    let nearest = new Sweep();\n    nearest.time = 1;\n    nearest.pos.x = this.pos.x + delta.x;\n    nearest.pos.y = this.pos.y + delta.y;\n    for (let i = 0, il = staticColliders.length; i < il; i++) {\n      const sweep = staticColliders[i].sweepAABB(this, delta);\n      if (sweep.time < nearest.time) {\n        nearest = sweep;\n      }\n    }\n    return nearest;\n  }\n}\n"],"sourceRoot":""}